{"version":3,"sources":["webpack:///./src/views/Map.vue?4be6","webpack:///src/views/Map.vue","webpack:///./src/views/Map.vue?44c8","webpack:///./src/views/Map.vue?134f","webpack:///./src/views/Map.vue?1e32","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","_m","staticClass","_v","_s","latitude","longitude","featureId","_e","staticRenderFns","attrs","name","data","map","subscriptionKey","tilesetId","statesetId","popup","datasource","company","mounted","parseFloat","console","log","openMap","methods","atlas","Map","center","style","view","authOptions","authType","zoom","controls","add","control","StyleControl","position","Popup","levelControl","length","indoorManager","setDynamicStyling","events","eventData","htmlContent","color","text","e","features","reduce","Object","prototype","hasOwnProperty","call","feature","properties","html","push","content","join","component","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","STRICT_METHOD","target","proto","forced","separator","undefined","fails","module","exports","METHOD_NAME","argument","method","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn","arguments"],"mappings":"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","file":"js/chunk-6dd8e9e1.ae1af3da.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_c('div',{staticClass:\"content-menu\"},[_c('b',[_vm._v(\"latitude:\"+_vm._s(_vm.latitude))]),_c('br'),_c('b',[_vm._v(\"longitude:\"+_vm._s(_vm.longitude))]),_c('br'),(_vm.featureId != '')?_c('b',[_vm._v(\"Feature ID: \"+_vm._s(_vm.featureId))]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"indoor-map\"},[_c('div',{attrs:{\"id\":\"map-id\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n  <div class=\"indoor-map\">\n      <div id=\"map-id\"></div>\n    </div>\n    <div class=\"content-menu\">\n      <b>latitude:{{ latitude }}</b>\n      <br/>\n      <b>longitude:{{ longitude }}</b>\n      <br/>\n      <b v-if=\"featureId != ''\">Feature ID: {{ featureId }}</b>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: 'map',\n  data() {\n    return {\n      map: null,\n      subscriptionKey: '',\n      latitude: 0,\n      longitude: 0,\n      tilesetId: '',\n      statesetId: '',\n      popup: '',\n      datasource: '',\n      featureId: '',\n      company: '',\n    };\n  },\n  mounted() {\n    const {\n      subscriptionKey,\n      latitude,\n      longitude,\n      tilesetId,\n      statesetId,\n      company,\n    } = this.$route.params;\n    this.subscriptionKey = subscriptionKey;\n    this.latitude = parseFloat(latitude);\n    this.longitude = parseFloat(longitude);\n    this.tilesetId = tilesetId;\n    this.statesetId = statesetId;\n    this.company = company;\n    console.log(`subscriptionKey: ${this.subscriptionKey}`);\n    console.log(`latitude: ${this.latitude}`);\n    console.log(`longitude: ${this.longitude}`);\n    console.log(`tilesetId: ${this.tilesetId}`);\n    console.log(`statesetId: ${this.statesetId}`);\n    this.openMap();\n  },\n  methods: {\n    openMap() {\n      console.log('openMap_openMap');\n      this.map = new atlas.Map('map-id', {\n        center: [this.longitude, this.latitude],\n        style: 'grayscale_light',\n        view: 'Auto',\n        authOptions: {\n          authType: 'subscriptionKey',\n          subscriptionKey: this.subscriptionKey,\n        },\n        zoom: 18,\n      });\n      this.map.controls.add(new atlas.control.StyleControl(\n        {\n          // eslint-disable-next-line\n          // mapStyles: ['road', 'road_shaded_relief', 'grayscale_light', 'night', 'grayscale_dark', 'satellite', 'satellite_road_labels', 'high_contrast_dark']\n          // eslint-disable-next-line\n          // mapStyles: 'all'\n          mapStyles: ['road', 'satellite_road_labels'],\n          layout: 'list',\n        },\n      ),\n      {\n        position: 'top-right',\n      });\n      this.popup = new atlas.Popup();\n      const levelControl = new atlas.control.LevelControl({\n        position: 'top-right',\n      });\n      const indoorManager = new atlas.indoor.IndoorManager(this.map, {\n        levelControl,\n        tilesetId: this.tilesetId,\n        statesetId: this.statesetId,\n      });\n      if (this.statesetId.length > 0) {\n        indoorManager.setDynamicStyling(true);\n      }\n      this.map.events.add('levelchanged', indoorManager, (eventData) => {\n        console.log('The level has changed:', eventData);\n      });\n      this.map.events.add('facilitychanged', indoorManager, (eventData) => {\n        console.log('The facility has changed:', eventData);\n      });\n      this.map.events.add('render', () => {\n        // console.log(`zoom: ${this.map.getCamera().zoom}`);\n        if (this.map.getCamera().zoom < 16) {\n          const marker = new atlas.HtmlMarker({\n            htmlContent: '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"50\" height=\"37\" viewBox=\"0 0 50 37\" xml:space=\"preserve\"><rect x=\"0\" y=\"0\" rx=\"8\" ry=\"8\" width=\"50\" height=\"30\" fill=\"{color}\"/><polygon fill=\"{color}\" points=\"10,29 20,29 15,37 10,29\"/><text x=\"25\" y=\"20\" style=\"font-size:16px;font-family:arial;fill:#ffffff;\" text-anchor=\"middle\">{text}</text></svg>',\n            color: 'Blue',\n            text: this.company,\n            position: [this.longitude, this.latitude],\n          });\n          this.map.markers.add(marker);\n        } else {\n          this.map.markers.clear();\n        }\n      });\n      // this.map.events.add('load', () => {\n      //   const zoomControl = new atlas.control.ZoomControl();\n      //   console.log(`zoomControl: ${JSON.stringify(zoomControl)}`);\n      //   this.map.controls.add(zoomControl, {\n      //     position: 'bottom-right',\n      //   });\n      // });\n      this.map.events.add('ready', () => {\n        this.popup = new atlas.Popup({\n          position: [0, 0],\n        });\n      });\n      this.map.events.add('click', (e) => {\n        console.log(e);\n        this.featureId = '';\n        const features = this.map.layers.getRenderedShapes(e.position, 'indoor');\n        // eslint-disable-next-line\n        features.reduce((ids, feature) => {\n          console.log(`feature: ${JSON.stringify(feature)}`);\n          console.log(`properties: ${JSON.stringify(feature.properties)}`);\n          // if (feature.layer.id === 'indoor_unit_office') {\n          // this.featureId = feature.id;\n          if (Object.prototype.hasOwnProperty.call(feature.properties, 'featureType')) {\n            console.log('featureType is exist');\n            this.featureId = feature.properties.featureId;\n          }\n          console.log(`featureID: ${this.featureId}`);\n          const html = ['<div style=\"padding:10px\"><b>'];\n          // for (let i = 0; i <= 10; i += 1) {\n          //   const year = 2000 + i;\n          //   html.push('<tr><td>', year, '</td><td>', '1', '%</td></tr>');\n          // }\n          if (this.featureId !== '') {\n            html.push(`Feature ID: ${this.featureId}`);\n          } else {\n            html.push('Feature ID: None');\n          }\n          html.push('</div>');\n          this.popup.setOptions({\n            content: html.join(''),\n            position: e.position,\n          });\n          this.popup.open(this.map);\n          // }\n        }, []);\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n/* .indoor-map {\n  position: absolute;\n  top: 30px;\n  left: 50px;\n  width: 1800px;\n  height: 960px;\n} */\n#map-id {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n}\n.content-menu {\n  position: absolute;\n  top: 15px;\n  left: 15px;\n  border-radius: 5px;\n  padding: 5px;\n  background-color: white;\n  text-align: left;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=54de634a&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=54de634a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54de634a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=54de634a&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}